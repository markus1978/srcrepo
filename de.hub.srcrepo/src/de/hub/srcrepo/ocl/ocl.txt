spec Model:
	sorts 
		Objects
		Labels
	ops
		roots: -> {Objects}
		ref: Objects x Labels -> [Objects]
	
spec Handle(m:Model):
	ops
		value: -> m.Objects + {NULL}
		next: Handle(m) + {NULL}
	vars
		next != NULL -> next.value != NULL
		value = NULL -> next = NULL
		
spec TreeHandle(m:Model): Handle(m)+
	ops
		parent: -> Handle(m)
		current: -> Handle(m)
		children: m.Objects -> Handle(m)
	vars
		value = current.value
		if current.next != NULL then 
			next.parent = parent
			next.current = current.next
			next.children(o) = children(o) 
		else
			if parent.next != NULL then
				next.parent = parent.next
				next.current = children(parent.next.value)
				next.children(o) = children(o)
			else
				next = NULL